{"version":3,"sources":["js/utils.js","js/abstract-view.js","js/view/intro-view.js","js/screens/intro-screen.js","js/view/game-view.js","js/view/modal-view.js","js/screens/game-screen.js","js/game-model.js","js/view/stats-view.js","js/screens/stats-screen.js","js/application.js","js/main.js"],"names":["Table","Command","LEFT","UP","RIGHT","DOWN","KeyCode","isCommandEvent","evt","keyCode","getRandomNum","min","max","Math","floor","random","createElement","template","arguments","length","undefined","tagName","className","outer","document","classList","add","innerHTML","trim","AbstractView","this","Error","_element","render","bind","IntroView","classCallCheck","possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","_this2","nameField","element","querySelector","buttonSubmit","addEventListener","onInputChange","checkValidity","onclick","preventDefault","onFormSubmit","value","disabled","IntroScreen","content","_this","isValidity","disableButton","enableButton","playerName","App","showGame","GameView","model","gameState","score","level","snakeCoords","foodPoint","cells","i","j","isSnake","k","Y","X","onCommandPress","buttonBack","onBackBtnClick","_getHeaderTemplate","_getCellsTemplate","ModalView","onResetClick","onContinueClick","GameScreen","root","appendChild","_interval","isModalOpen","startGame","switchCommand","key","showModal","setInterval","isFirstCommand","shouldContinue","updateView","isNextLevel","stopGame","saveResult","showStats","tick","clearInterval","_this3","view","replaceChild","_this4","modal","showIntro","remove","GameModel","myStorage","window","localStorage","command","restartGame","newPoint","getNewSnakePoint","shakeSecondPoint","_gameState","isFood","changeLevel","generateNewFoodPoint","pop","unshift","newFoodPoint","oldHead","slice","newHead","assign","setItem","toString","substr","point","food","StatsView","data","_templateAllGames","forEach","index","_templateOneGame","getItem","split","push","sort","a","b","_getData","_getTemplates","StatsScreen","screenContainer","showScreen","Application","intro","init","game","stats"],"mappings":"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","file":"main.js","sourcesContent":["export const TICK_TIME = 500;\nexport const SPEED_COEF = 0.9;\nexport const LEVEL_LIMIT = 5;\n\nexport const Table = {\n  ROW: 15,\n  COLUMN: 30\n};\n\nexport const Command = {\n  LEFT: `ArrowLeft`,\n  UP: `ArrowUp`,\n  RIGHT: `ArrowRight`,\n  DOWN: `ArrowDown`,\n};\n\nconst KeyCode = {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n\nconst isLeftEvent = function (evt) {\n  return evt.keyCode === KeyCode.LEFT;\n};\n\nconst isUpEvent = function (evt) {\n  return evt.keyCode === KeyCode.UP;\n};\n\nconst isRightEvent = function (evt) {\n  return evt.keyCode === KeyCode.RIGHT;\n};\n\nconst isDownEvent = function (evt) {\n  return evt.keyCode === KeyCode.DOWN;\n};\n\nexport const isCommandEvent = function (evt) {\n  return isLeftEvent(evt) || isUpEvent(evt) || isRightEvent(evt) || isDownEvent(evt);\n};\n\nexport const getRandomNum = function (min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\nexport const createKey = function () {\n  return `key_` + Math.random().toString(36).substr(2, 9);\n};\n\nexport const createElement = function (template = ``, tagName = `div`, className = ``) {\n  const outer = document.createElement(tagName);\n  if (className) {\n    outer.classList.add(className);\n  }\n  outer.innerHTML = template.trim();\n  return outer;\n};\n\n\n","import {createElement} from \"./utils\";\n\n\nexport default class AbstractView {\n\n  get template() {\n    throw new Error(`You have to define template for view`);\n  }\n\n  render() {\n    return createElement(this.template);\n  }\n\n  bind() {}\n\n  get element() {\n    if (!this._element) {\n      this._element = this.render();\n      this.bind();\n    }\n    return this._element;\n  }\n}\n","import AbstractView from \"../abstract-view\";\nimport {createElement} from \"../utils\";\n\nexport default class IntroView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n      <h1 class=\"intro__title\">Snake</h1>\n      <p class=\"intro__description\">The player controls a snake, which is picking up food, trying to avoid hitting its own tail. Each time the snake eats a piece of food, its tail grows longer. The user controls the direction of the snake's head (up, down, left, or right), and the snake's body follows. The player can not stop the snake from moving while the game is in progress, and can not make the snake to go in reverse. </p>\n      <form class=\"intro__form\">\n        <input class=\"intro__input\" type=\"text\" placeholder=\"Player name\" pattern=\"[a-zA-Z0-9-_\\.\\s]{1,20}\" required>\n        <button class=\"intro__button  continue\" type=\"submit\" disabled>Go!</button>\n      </form>`;\n  }\n\n  render() {\n    return createElement(this.template, `section`, `intro`);\n  }\n\n  bind() {\n    this.nameField = this.element.querySelector(`.intro__input`);\n    this.buttonSubmit = this.element.querySelector(`.intro__button`);\n\n    this.nameField.addEventListener(`input`, () => this.onInputChange(this.nameField.checkValidity()));\n\n    this.buttonSubmit.onclick = (evt) => {\n      evt.preventDefault();\n      this.onFormSubmit(this.nameField.value);\n    };\n  }\n\n  enableButton() {\n    this.buttonSubmit.disabled = false;\n  }\n\n  disableButton() {\n    this.buttonSubmit.disabled = true;\n  }\n\n  onInputChange() {}\n\n  onFormSubmit() {}\n}\n","import IntroView from \"../view/intro-view\";\nimport App from \"../application\";\n\nexport default class IntroScreen {\n  constructor() {\n    this.content = new IntroView();\n  }\n\n  init() {\n    this.content.onInputChange = (isValidity) => {\n      this.content.disableButton();\n      if (isValidity) {\n        this.content.enableButton();\n      }\n    };\n\n    this.content.onFormSubmit = (playerName) => {\n      App.showGame(playerName);\n    };\n  }\n}\n\n","import AbstractView from \"../abstract-view\";\nimport {Table, createElement, isCommandEvent} from \"../utils\";\n\nexport default class GameView extends AbstractView {\n  constructor(model) {\n    super();\n    this.gameState = model.gameState;\n  }\n\n  get template() {\n    return `\n      ${this._getHeaderTemplate()}\n      <div class=\"game__table\">\n        ${this._getCellsTemplate()}\n      </div>`;\n  }\n\n  _getHeaderTemplate() {\n    return `\n      <header class=\"game__header\">\n        <button class=\"back\">\n          <img src=\"img/arrow_left.svg\" width=\"40\" height=\"40\" alt=\"Back\">\n        </button>\n        <span class=\"game__score\">Score: ${this.gameState.score}</span>\n        <span class=\"game__level\">Level: ${this.gameState.level}</span>\n      </header>`;\n  }\n\n  _getCellsTemplate() {\n    const snakeCoords = this.gameState.snakeCoords;\n    const foodPoint = this.gameState.foodPoint;\n\n    let cells = ``;\n    for (let i = 1; i <= Table.ROW; i++) {\n      for (let j = 1; j <= Table.COLUMN; j++) {\n        let isSnake = false;\n        for (let k = 0; k < snakeCoords.length; k++) {\n          if (i === snakeCoords[k].Y && j === snakeCoords[k].X) {\n            isSnake = true;\n            break;\n          }\n        }\n        if (isSnake) {\n          cells += `<div class=\"game__cell game__cell--snake\">${i}, ${j}</div>`;\n        } else if (foodPoint.X === j && foodPoint.Y === i) {\n          cells += `<div class=\"game__cell game__cell--food\">${i}, ${j}</div>`;\n        } else {\n          cells += `<div class=\"game__cell\">${i}, ${j}</div>`;\n        }\n      }\n    }\n    return cells;\n  }\n\n  render() {\n    return createElement(this.template, `div`, `game__content`);\n  }\n\n  bind() {\n    document.addEventListener(`keydown`, (evt) => {\n      if (isCommandEvent(evt)) {\n        this.onCommandPress(evt);\n      }\n    });\n    this.buttonBack = this.element.querySelector(`.back`);\n    this.buttonBack.addEventListener(`click`, (evt) => {\n      evt.preventDefault();\n      this.onBackBtnClick();\n    });\n  }\n\n  onCommandPress() {}\n\n  onBackBtnClick() {}\n}\n","import AbstractView from \"../abstract-view\";\n\nexport default class ModalView extends AbstractView {\n  constructor() {\n    super();\n  }\n\n  get template() {\n    return `\n    <div class=\"game__modal\">\n      <h3 class=\"game__modal-question\">Do you really want to quit?</h3>\n      <p class=\"game__modal-text\">Progress in the current game will be lost!</p>\n      <button type=\"button\" class=\"game__modal-button  game__modal-button--reset\">Yes</button>\n      <button type=\"button\" class=\"game__modal-button  game__modal-button--continue\">No</button>\n    </div>`;\n  }\n\n  bind() {\n    this.element.querySelector(`.game__modal-button--reset`).addEventListener(`click`, (evt) => {\n      evt.preventDefault();\n      this.onResetClick();\n    });\n    this.element.querySelector(`.game__modal-button--continue`).addEventListener(`click`, (evt) => {\n      evt.preventDefault();\n      this.onContinueClick();\n    });\n  }\n\n  onResetClick() {}\n\n  onContinueClick() {}\n}\n","import App from \"../application\";\nimport GameView from \"../view/game-view\";\nimport ModalView from \"../view/modal-view\";\n\nexport default class GameScreen {\n  constructor(model) {\n    this.model = model;\n    this.content = new GameView(this.model);\n    this.root = document.createElement(`section`);\n    this.root.classList.add(`game`);\n    this.root.appendChild(this.content.element);\n    this._interval = null;\n    this.isModalOpen = false;\n  }\n\n  get element() {\n    return this.content.element;\n  }\n\n  init() {\n    this.startGame();\n    this.content.onCommandPress = (evt) => {\n      this.model.switchCommand(evt.key);\n    };\n    this.content.onBackBtnClick = () => this.showModal();\n  }\n\n  startGame() {\n    this._interval = setInterval(() => {\n      let isFirstCommand = true;\n      this.content.onCommandPress = (evt) => {\n        if (isFirstCommand) {\n          this.model.switchCommand(evt.key);\n          isFirstCommand = false;\n        }\n      };\n      if (this.model.shouldContinue()) {\n        this.updateView();\n        if (this.model.isNextLevel) {\n          this.stopGame();\n          this.startGame();\n        }\n      } else {\n        this.model.saveResult();\n        this.stopGame();\n        App.showStats();\n      }\n    }, this.model.tick);\n  }\n\n  stopGame() {\n    clearInterval(this._interval);\n  }\n\n  updateView() {\n    const view = new GameView(this.model);\n    this.root.replaceChild(view.element, this.content.element);\n    this.content = view;\n    this.content.onBackBtnClick = () => {\n      if (!this.isModalOpen) {\n        this.showModal();\n      }\n    };\n  }\n\n  showModal() {\n    this.stopGame();\n    this.isModalOpen = true;\n    const modal = new ModalView();\n    modal.onResetClick = () => {\n      App.showIntro();\n    };\n    modal.onContinueClick = () => {\n      this.startGame();\n      modal.element.remove();\n      this.isModalOpen = false;\n    };\n    this.root.appendChild(modal.element);\n  }\n\n}\n","import {TICK_TIME, SPEED_COEF, LEVEL_LIMIT, Command, Table, getRandomNum, createKey} from \"./utils\";\n\nexport default class GameModel {\n  constructor(playerName) {\n    this.myStorage = window.localStorage;\n    this.playerName = playerName;\n    this.command = Command.RIGHT;\n    this.tick = TICK_TIME;\n    this.restartGame();\n  }\n\n  get gameState() {\n    return this._gameState;\n  }\n\n  switchCommand(command) {\n    const newPoint = this.getNewSnakePoint(command);\n    const shakeSecondPoint = this._gameState.snakeCoords[1];\n    if (newPoint.X !== shakeSecondPoint.X || newPoint.Y !== shakeSecondPoint.Y) {\n      this.command = command;\n    }\n  }\n\n  shouldContinue() {\n    this.isNextLevel = false;\n    const newPoint = this.getNewSnakePoint(this.command);\n    if (this.isSnake(newPoint)) {\n      return false;\n    } else if (!this.isFood(newPoint)) {\n      this._gameState.snakeCoords.pop();\n    } else {\n      this._gameState.score += 1;\n      if (this._gameState.score % LEVEL_LIMIT === 0) {\n        this.isNextLevel = true;\n        this.changeLevel();\n      }\n      this.generateNewFoodPoint();\n    }\n    this._gameState.snakeCoords.unshift(newPoint);\n    return true;\n  }\n\n  changeLevel() {\n    this._gameState.level += 1;\n    this.tick *= SPEED_COEF;\n  }\n\n  generateNewFoodPoint() {\n    const newFoodPoint = {\n      X: getRandomNum(1, Table.COLUMN),\n      Y: getRandomNum(1, Table.ROW)\n    };\n    if (this.isSnake(newFoodPoint)) {\n      this.generateNewFoodPoint();\n    } else {\n      this._gameState.foodPoint = newFoodPoint;\n    }\n  }\n\n  getNewSnakePoint(command) {\n    const oldHead = this._gameState.snakeCoords.slice()[0];\n    const newHead = Object.assign({}, oldHead);\n\n    switch (command) {\n      case Command.UP:\n        if (oldHead.Y === 1) {\n          newHead.Y = Table.ROW;\n          break;\n        }\n        newHead.Y -= 1;\n        break;\n      case Command.RIGHT:\n        if (oldHead.X === Table.COLUMN) {\n          newHead.X = 1;\n          break;\n        }\n        newHead.X += 1;\n        break;\n      case Command.DOWN:\n        if (oldHead.Y === Table.ROW) {\n          newHead.Y = 1;\n          break;\n        }\n        newHead.Y += 1;\n        break;\n      case Command.LEFT:\n        if (oldHead.X === 1) {\n          newHead.X = Table.COLUMN;\n          break;\n        }\n        newHead.X -= 1;\n    }\n    return newHead;\n  }\n\n  restartGame() {\n    this._gameState = {\n      level: 1,\n      score: 0,\n      snakeCoords: [{\n        X: 6,\n        Y: 5\n      }, {\n        X: 5,\n        Y: 5\n      }, {\n        X: 4,\n        Y: 5\n      }],\n      foodPoint: {\n        X: 15,\n        Y: 7\n      }\n    };\n  }\n\n  saveResult() {\n    this.myStorage.setItem(createKey(), [this.playerName, this._gameState.score]);\n  }\n\n  isSnake(point) {\n    const snakeCoords = this._gameState.snakeCoords;\n    for (let i = 0; i < snakeCoords.length; i++) {\n      if (snakeCoords[i].X === point.X && snakeCoords[i].Y === point.Y) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  isFood(point) {\n    const food = this._gameState.foodPoint;\n    return (food.X === point.X && food.Y === point.Y);\n  }\n}\n","import AbstractView from \"../abstract-view\";\nimport {createElement} from \"../utils\";\n\nexport default class StatsView extends AbstractView {\n  constructor() {\n    super();\n    this.myStorage = window.localStorage;\n    this.data = [];\n    this._templateAllGames = ``;\n  }\n\n  get template() {\n    this._getData();\n    this._getTemplates();\n    return `\n    <header class=\"result__header\">\n      <button class=\"result__back back\">\n        <img src=\"img/arrow_left.svg\" width=\"45\" height=\"45\" alt=\"Back\">\n      </button>\n      <h1 class=\"result__title\">Results</h1>\n    </header>\n    <table class=\"result__table\">\n      <tr>\n        <th class=\"result__number\">#</th>\n        <th>Player</th>\n        <th class=\"result__total  result__total--final\">Score</th>\n      </tr>\n      ${this._templateAllGames}\n    </table>`;\n  }\n\n  _getTemplates() {\n    this.data.forEach((gameState, index) => {\n      this._templateAllGames += this._templateOneGame(gameState, index);\n    });\n  }\n\n  _getData() {\n    for (let i = 0; i < this.myStorage.length; i++) {\n      const key = this.myStorage.key(i);\n      const data = this.myStorage.getItem(key).split(`,`);\n      this.data.push({playerName: data[0], score: data[1]});\n    }\n    this.data.sort((a, b) => {\n      return b.score - a.score;\n    });\n  }\n\n  _templateOneGame(gameState, index) {\n    return `\n      <tr>\n        <td class=\"result__number\">${index + 1}.</td>\n        <td>${gameState.playerName}</td>\n        <td class=\"result__total  result__total--final\">${gameState.score}</td>\n      </tr>`;\n  }\n\n  render() {\n    return createElement(this.template, `section`, `result`);\n  }\n\n  bind() {\n    this.buttonBack = this.element.querySelector(`.back`);\n    this.buttonBack.addEventListener(`click`, (evt) => {\n      evt.preventDefault();\n      this.onBackBtnClick();\n    });\n  }\n}\n","import App from \"./../application\";\nimport StatsView from \"../view/stats-view\";\n\nexport default class StatsScreen {\n  constructor(data) {\n    this.content = new StatsView(data);\n  }\n\n  init() {\n    this.content.onBackBtnClick = () => App.showIntro();\n  }\n}\n","import IntroScreen from \"./screens/intro-screen\";\nimport GameScreen from \"./screens/game-screen\";\nimport GameModel from \"./game-model\";\nimport StatsScreen from \"./screens/stats-screen\";\n\nconst screenContainer = document.querySelector(`.central`);\n\nconst showScreen = (element) => {\n  screenContainer.innerHTML = ``;\n  screenContainer.appendChild(element);\n};\n\nexport default class Application {\n  static showIntro() {\n    const intro = new IntroScreen();\n    showScreen(intro.content.element);\n    intro.init();\n  }\n\n  static showGame(playerName = `Anonymous Raccoon`) {\n    const game = new GameScreen(new GameModel(playerName));\n    showScreen(game.root);\n    game.init();\n  }\n\n  static showStats() {\n    const stats = new StatsScreen();\n    showScreen(stats.content.element);\n    stats.init();\n  }\n}\n","import App from \"./application\";\n\nApp.showIntro();\n"]}